<?php

use \Phinx\Migration\AbstractMigration;

class <%= migrationClass %> extends AbstractMigration
{
    public function up()
    {
        <% viewTables.forEach(vt => { %>
            $this->execute('DROP VIEW IF EXISTS `<%= vt.TABLE_NAME %>`');
            $this->execute('CREATE 
                DEFINER = <%= vt.DEFINER %>
                VIEW `<%= vt.TABLE_NAME %>`
                AS <%- vt.VIEW_DEFINITION %>
            ');
        <% }); %>
    }
}